/*
	CodeQuest Frontend
	Written by Jonathan Verbeek - 2023
*/

import { Logger } from "./Logging";
import { Service } from "./Service";

// This service is responsible for executing and evaluating code, either generated by the VPL
// or typed into the text code editor
class CodeEvalService extends Service {
    // Load a program
    public loadProgram(program : string) {
        if (program.length <= 0)
            return;

        this._program = program;
    }

    // Run the loaded program
    public run() {
        if (this._program.length <= 0)
            return;

        // TODO: replace with actual interpreter?
        // TODO: we assume this is JS
        try {
            eval(this._program);
        } catch (e) {
            var error = e as Error;
            Logger.error(`Error executing JS: ${error.message}`);
        }
    }

    private _program : string = "";
}

export { CodeEvalService };
